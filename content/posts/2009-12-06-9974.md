---
title: Домашний тест DNS-провайдеров
author: Gray
type: posts
date: 2009-12-06T12:09:17+00:00
excerpt:
url: /9974
dsq_thread_id:
  - 50121741
esml_socialcount_LAST_UPDATED:
  - 1497276123
essb_cache_expire:
  - 1614396556
essb_c_vk:
  - 2
essb_c_pocket:
  - 4
essb_c_total:
  - 2
swp_cache_timestamp:
  - 416511
categories:
  - Uncategorized

---







Почитав отзывы на только что запущенный Google Public DNS, решил потратить немного времени и разобраться &#8212; что же действительно будет быстрее и надежнее? У любого пользователя интернета есть выбор &#8212; пользоваться провайдерскими DNS-серверами или сервисами типа OpenDNS, UltraDNS и вот теперь запущенным сервисом Google.

Как раз подоспел релиз неплохой утилитки для замера скорости ответа DNS на локальном компьютере &#8212; [namebench][1]. Программка умная, сама вытаскивает из кэша браузера домены, актуальные для данного пользователя и генерирует список для правильного тестирования. Можно в качестве источника доменов указать топ Алексы.

Собственно, вооружился я позже скажу чем и приступил.

<img src="https://i2.wp.com/img.skitch.com/20091206-b2sqjfcb8sfbtkm9bcuqef7hje.png?w=740" alt="namebench: 2009-12-06 15:31:52.609978" data-recalc-dims="1" /> 

Первый тест неинтересный &#8212; он сделан на 100 мегабитном подключении. Хотя результат в этом измерении и немного неожиданен &#8212; победил сервис UltraDNS, но это понятно &#8212; локальный DNS в роутере сетки ограничен по возможностям кэша, поэтому в тех случаях, когда ему требуется сходить в вышестоящий сервис, он однозначно проигрывает, а высокая скорость подключения сводит на нет его преимущества. В повторных измерениях случались и победы локального роутера, а когда вместо него был указан непосредственно сервер провайдера, UltraDNS смирился со вторым местом.

Но тест все равно неинтересный &#8212; разница в результатах сервисов абсолютно неощутима при использовании и вся укладывается в 17 миллисекунд &#8212; не всякое широкополосное подключение таким пингом может похвастаться. Поэтому я решительно отключил в ноутбуке wi-fi и ухудшил коннект &#8212; включив модем МТС-Коннект и подняв CDMA EV-DO соединение.

<img src="https://i1.wp.com/img.skitch.com/20091206-qeia5trm3je5pgr3aayijugkg8.png?w=740" alt="namebench: 2009-12-06 14:49:37.103324" data-recalc-dims="1" /> 

Результат более предсказуемый &#8212; при вполне удовлетворительном коннекте и не очень узкой полосе (порядка мегабита в обе стороны) побеждают серверы провайдера. Даже если им приходится сходить на вышестоящий уровень за данными, все равно канал от них в остальную сеть гораздо быстрее, чем тот, которым пользуется локальная машина. Обратите внимание, что остальные сервисы идут достаточно плотно.

Для очистки совести проверим, а как же дело обстоит с другим 3G &#8212; втыкаем модем с карточкой Utel и тестируем на гораздо более асимметричном канале (386кБит UL/3,6 мБит DL).

<img src="https://i2.wp.com/img.skitch.com/20091206-1mpdg2mkrn5rr6knmg2288uiqn.png?w=740" alt="namebench: 2009-12-06 14:57:30.944514" data-recalc-dims="1" /> 

Тут тоже побеждают провайдерские серверы &#8212; по той же причине. Порядок следования остальных сервисов, вероятно, больше определяется коннективностью конкретного провайдера &#8212; UltraDNS как европейская компания просто ближе Укртелекому.

С широкополосными подключениями все понятно, поэтому переходим к смертельному номеру &#8212; включаем EDGE от Киевстара.

<img src="https://i1.wp.com/img.skitch.com/20091206-jhebhij5dys1ut851i6yct3673.png?w=740" alt="namebench: 2009-12-06 15:18:46.979864" data-recalc-dims="1" /> 

Результат абсолютно предсказуемый &#8212; провайдерский сервис выигрывает и тут.

Однако мне таки удалось добиться поражения провайдерских серверов. Для этого я выбрал в качестве выборки топ Алексы и получил вот такое:

<img src="https://i0.wp.com/img.skitch.com/20091206-k67uh5q5wni69fu3fd78udwhkb.png?w=740" alt="namebench: 2009-12-06 15:28:44.609095" data-recalc-dims="1" /> 

Разумеется, другого результата и ждать нельзя было &#8212; ведь я не хожу на сайты из топа Алексы и этих доменов просто нет в кэше моего локального роутера. Ему практически за каждым доменом приходилось ходить в один или два вышестоящих уровня DNS, хотя для нескольких доменов результат у него был свой и он отвечал за пару миллисекунд.

Давайте сделаем вывод &#8212; для среднего пользователя интернета с достаточно определенным кругом посещаемых сайтов никакого выигрыша в скорости при использовании внешних сервисов DNS не наступает. Большинство нужных ему доменов есть в кэше домашнего роутера или сервера провайдера, а необходимость сходить за некоторыми доменами выше ему, скорее всего, даже не будет заметна. Мне было не очень интересно переконфигурировать сетку, настраивая роутер на разные внешние сервисы, но подозреваю, что это единственный вариант, который будет и быстрым и надежным. По возможности проверю.

И напоследок &#8212; как видно из замеров, из внешних сервисов сервис Google не самый быстрый.

 [1]: http://code.google.com/p/namebench/