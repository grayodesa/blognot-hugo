---
title: Перевел блог на https
author: Gray
type: posts
date: 2014-12-03T21:31:08+00:00
url: /12215
wp-to-buffer-pro:
  - 'a:4:{s:8:"override";s:1:"0";s:7:"message";s:0:"";s:6:"number";s:1:"1";s:16:"alternateMessage";s:0:"";}'
bluth_post_layout:
  - right_side
dsq_thread_id:
  - 3287899626
esml_socialcount_LAST_UPDATED:
  - 1497243242
esml_socialcount_linkedin:
  - 1
esml_socialcount_TOTAL:
  - 10
esml_socialcount_googleplus:
  - 9
essb_cache_expire:
  - 1616157305
essb_c_facebook:
  - 21
essb_c_twitter:
  - 1
essb_c_google:
  - 18
essb_c_linkedin:
  - 2
essb_c_buffer:
  - 8
essb_c_pocket:
  - 8
essb_c_total:
  - 22
categories:
  - Без рубрики

---







Пришлось повозиться, но теперь блог доступен и по http, и по https. Во втором случае у вас еще и SPDY будет срабатывать, хотя никакого суперэффекта вы, скорее всего, не увидите.

Процесс оказался довольно интересный, тем более, что я использовал Flexible SSL от Cloudflare — когда браузеру пользователя отвечает по https собственно фронтенд-сервер Cloudflare, а коммуникация между ним и собственно блогом идет по http. Это немного осложнило — поскольку по умолчанию WordPress включает или нет поддержку SSL, ориентируясь на переменную окружения на своем сервере, не особо обращая внимание на то, какой протокол использует браузер. Если коротко — примерно в десятке разных мест в коде движка, шаблонов или плагинов пришлось руками указать протоколо-независимые пути или жестко прописать https.

Насильно всех отправлять на https я не планирую по совершенно банальным причинам — этому блогу 12 лет, за это время в нем опубликована масса картинок, например, которые, разумеется, используют путь через http. Что вручную, что автоматом это менять — совершенное безумие, наполовину бессмысленное притом — нет никакой гарантии, что все картинки доступны и по https.

Из неприятного — судя по всему, Twitter не склеивает ретвиты между протоколами. Из странного — пришлось выключить виджет Инстаграм, поскольку API этого сервиса всегда отвечает картинками по http, хотя все они доступны по обоим протоколам. Лезть руками в код и вырезать протокол из адреса пока не хочется.

В общем, неплохое упражнение, чтобы не забывать верстку и прочий фронтенд окончательно.